<!DOCTYPE HTML>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/admin/css/Bootstrapv4.1.3.css">
    <link rel="stylesheet" href="/admin/css/font-awesome/css/font-awesome.min.css">
    <title>Server Admin</title>
    <script src="/admin/js/jquery-3.3.1.min.js"></script>
    <script>
      function control(cmd) {
          $('#main_admin_control').find('input[name=appCmd]').val(cmd);
          $('#main_admin_control').submit();
      }
    </script>
  </head>
<body>
    <div class="container-fluid bg-light">
       <div class="container">
        <nav class="navbar navbar-default navbar-expand-lg navbar-light bg-light">
        <h4>Server Admin</h4>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link  {if $module === 'database'} active {/if}" href="/admin/database">Database <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item {if $module === 'website'} active {/if}">
              <a class="nav-link" href="/admin/website">Web Site <span class="sr-only">(current)</span></a>
            </li>            
            <li class="nav-item">
               <form action="/admin/" method="post" class="pull-right">
                <input type="hidden" name="authCmd" value="signout" />
                <input type="submit"  class="btn btn-warning"  value="Sign out" />
              </form>  
            </li>
          </ul>
        </div>
      </nav></div>
    </div>
    <br/>
  
   <div class="container">
     {if $module === 'website'}
        <div class="col-md-8"> 
          <form action="/admin/website" method="post">
              <fieldset>
                  <legend></legend>
                  <div class="form-group">
                      <label for="">GitHub Repository：</label>                                          
                      <input type="text" class="form-control"  name="github" value="{$data.github}"/>
                  </div>
                  <input type="hidden" name="appCmd" value="saveGit" />
                  <input type="submit" class="btn btn-success" value="Submit Repository"/>
                  &nbsp;&nbsp;&nbsp;<span style="color:red">{$err}</span>
              </fieldset>
          </form>    
        </div> 
     {/if}
 
     {if $module === 'database'}
         <form id="main_admin_control" action="/admin/database" method="post">
           <input type="text" name="appCmd" value="" />
         </form>  
        <div  class="col-md-12">
          <button type="button" class="btn btn-warning" onClick="control('addDB')">
            <i class="icon-plus-sign-alt"></i>&nbsp;Add a new DB link
         </button>
          {foreach from=$dbs key=key item=value}
          <button type="button" class="btn btn-primary">
            <i class="icon-pencil"></i>&nbsp;{$key}
         </button> 
          {/foreach}
 
        </div>
        <div class="col-md-4"> 
          {if $appCmd === 'addDB' || $appCmd === 'editDB'}
          <form action="/admin/database" method="post">
              <fieldset>
                  <legend>Setup Databse</legend>
                  <div class="form-group">
                      <label for="">Config ID：</label>                                          
                      <input type="text" class="form-control"  name="host" value="{$cfgID}"/>                    
                      <label for="">Host：</label>                                          
                      <input type="text" class="form-control"  name="host" value="{$data.host}"/>
                      <label for="">User：</label>                                          
                      <input type="text" class="form-control"  name="user" value="{$data.user}"/>
                      <label for="">Password：</label>                                          
                      <input type="text" class="form-control"  name="password" value="{$data.password}"/>
                      <label for="">Database：</label>                                          
                      <input type="text" class="form-control"  name="database" value="{$data.database}"/>  
                  </div>
                  <input type="hidden" name="appCmd" value="savedb" />
                  <input type="submit" class="btn btn-success" value="Save"/>
                    &nbsp;&nbsp;
                  <input type="submit" class="btn btn-danger" value="Delete"/>
                  &nbsp;&nbsp;&nbsp;<span style="color:red">{$err}</span>
              </fieldset>
          </form>
           {/if} 
        </div> 
     {/if}
     
     {if $module === 'err'}
        <div class="col-md-8"> 
            Wrong option!   
        </div> 
     {/if}     
  
      {if $module === ''}
        <div class="col-md-8"> 
            Click navigator items to setup database and website.   
        </div> 
     {/if}        
  
      {if $module === 'success'}
        <div class="col-md-8"> 
            {$message}.   
        </div> 
     {/if}       
     
   </div> 
</body>
</html>

